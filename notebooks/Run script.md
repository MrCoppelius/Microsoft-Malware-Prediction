Мы хотим подготовить данные в формате, подходящем для нашего скрипта, применяющего модель.

Затем мы хотим прогнать их через скрипт.

# Импорты


```python
import json
import os

import pandas as pd
```

# Подготовка данных


```python
data_path = '../data/hold_data.csv'
data = pd.read_csv(data_path)

print(len(data))
```


```python
json_string_list = []

for row in data.iterrows():
    json_string = json.dumps(row[1].to_dict())
    json_string_list.append(json_string)
    
print(len(json_string_list))
```


```python
json_string_list += ['stop\n']
input_string = '\n'.join(json_string_list)
len(input_string)
```


```python
json_string_list[0]
```


```python
script_input_path = '../data/script_input.txt'
with open(script_input_path, 'w') as file:
    file.write(input_string)
```

# Пропуск данных через скрипт


```python
python_path = '/home/udimov/python-virtual-environments/safeboard_ml_task/bin/python3'
script_path = '../malware_ml/malware_detector.py'
```


```python
%%time
os.system(f'cat {script_input_path} | {python_path} {script_path}')
```


```python

```
